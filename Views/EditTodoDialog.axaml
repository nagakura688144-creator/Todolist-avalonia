<!-- Views/EditTodoDialog.axaml -->
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:TodoApp.ViewModels"
        x:Class="TodoApp.Views.EditTodoDialog"
        x:DataType="vm:EditTodoViewModel"
        Width="400" Height="280"
        Title="Edit Todo"
        WindowStartupLocation="CenterOwner"
        CanResize="False">

  <StackPanel Margin="20" Spacing="12">
    <!-- Title Section -->
    <TextBlock Text="Title" FontWeight="SemiBold"/>
    <TextBox Text="{Binding Title}" 
             Watermark="Enter task title"
             MinHeight="32"/>
    
    <!-- Error Message -->
    <TextBlock Text="{Binding ErrorMessage}" 
               Foreground="Red" 
               IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
    
    <!-- Due Date Section -->
    <TextBlock Text="Due Date (Optional)" FontWeight="SemiBold" Margin="0,8,0,0"/>
    <StackPanel Orientation="Horizontal" Spacing="8">
      <DatePicker SelectedDate="{Binding DueDate}" 
                  MinWidth="200"/>
      <Button Content="Clear Date" 
              Command="{Binding $parent[Window].((vm:EditTodoViewModel)DataContext).ClearDateCommand}"
              IsVisible="{Binding DueDate, Converter={x:Static ObjectConverters.IsNotNull}}"/>
    </StackPanel>
    
    <!-- Buttons -->
    <StackPanel Orientation="Horizontal" 
                HorizontalAlignment="Right" 
                Spacing="12" 
                Margin="0,20,0,0">
      <Button Content="Cancel" 
              Width="100" 
              Click="OnCancel"/>
      <Button Content="Edit" 
              Width="100"
              IsDefault="True" 
              IsEnabled="{Binding IsValid}"
              Click="OnSave"
              Classes="accent"/>
    </StackPanel>
  </StackPanel>
</Window>
